"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.localStrategy = exports.jwtStrategy = exports.customerStrategy = void 0;
var _passport = _interopRequireDefault(require("passport"));
var _jsonwebtoken = _interopRequireDefault(require("jsonwebtoken"));
var _config = _interopRequireDefault(require("../config"));
var JWTSign = function JWTSign(iss, user, date) {
  return _jsonwebtoken["default"].sign({
    iss: iss,
    sub: user.id,
    iam: user.type,
    iat: date.getTime(),
    exp: new Date().setMinutes(date.getMinutes() + 30)
  }, _config["default"].app.secret);
};
var jwtStrategy = function jwtStrategy(req, res, next) {
  _passport["default"].authenticate('user-jwt', {
    session: false
  }, function (err, user, info) {
    var contype = req.headers['content-type'];
    var json = !(!contype || contype.indexOf('application/json') !== 0);
    if (err && err == 'expired') {
      return json ? res.status(500).json({
        errors: ['Session is expired']
      }) : res.redirect('/auth/login');
    }
    if (err && err == 'invalid') {
      return json ? res.status(500).json({
        errors: ['Invalid token recieved']
      }) : res.redirect('/logout');
    }
    if (err && err == 'user') {
      return json ? res.status(500).json({
        errors: ['Invalid user recieved']
      }) : res.redirect('/logout');
    }
    if (err && Object.keys(err).length) {
      return res.status(500).json({
        errors: [err]
      });
    }
    if (err) {
      return res.status(500).json({
        errors: ['Invalid user recieved']
      });
    }
    if (!user) {
      return json ? res.status(500).json({
        errors: ['Invalid user recieved']
      }) : res.redirect('/logout');
    }
    req.user = user;
    next();
  })(req, res, next);
};
exports.jwtStrategy = jwtStrategy;
var localStrategy = function localStrategy(req, res, next) {
  _passport["default"].authenticate('user-local', {
    session: false
  }, function (err, user, info) {
    console.log(err);
    if (err && err == 'invalid') {
      return res.status(500).json({
        errors: ['Email Id not verified']
      });
    }
    if (err && err == 'attempt') {
      return res.status(500).json({
        errors: ['Too many invalid attempts. Please reset your password.']
      });
    }
    if (err && err.startsWith('attempt:')) {
      return res.status(500).json({
        errors: ['Invalid Credentials (' + err.split(':')[1] + ' Attempt(s) Left)']
      });
    }
    if (err) {
      return res.status(500).json({
        errors: [err]
      });
    }
    if (!user) {
      return res.status(500).json({
        errors: ['Invalid Credentials']
      });
    }
    req.user = user;
    next();
  })(req, res, next);
};
exports.localStrategy = localStrategy;
var customerStrategy = function customerStrategy(req, res, next) {
  _passport["default"].authenticate('customer-local', {
    session: false
  }, function (err, user, info) {
    if (err && err == 'invalid') {
      return res.status(500).json({
        errors: ['Email Id not verified']
      });
    }
    if (err && err == 'attempt') {
      return res.status(500).json({
        errors: ['Too many invalid attempts. Please reset your password.']
      });
    }
    if (err && err.startsWith('attempt:')) {
      return res.status(500).json({
        errors: ['Invalid Credentials (' + err.split(':')[1] + ' Attempt(s) Left)']
      });
    }
    if (err) {
      return res.status(500).json({
        errors: [err]
      });
    }
    if (!user) {
      return res.status(500).json({
        errors: ['Invalid Credentials']
      });
    }
    req.user = user;
    next();
  })(req, res, next);
};
exports.customerStrategy = customerStrategy;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFzc3BvcnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9qc29ud2VidG9rZW4iLCJfY29uZmlnIiwiSldUU2lnbiIsImlzcyIsInVzZXIiLCJkYXRlIiwiSldUIiwic2lnbiIsInN1YiIsImlkIiwiaWFtIiwidHlwZSIsImlhdCIsImdldFRpbWUiLCJleHAiLCJEYXRlIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJjb25maWciLCJhcHAiLCJzZWNyZXQiLCJqd3RTdHJhdGVneSIsInJlcSIsInJlcyIsIm5leHQiLCJwYXNzcG9ydCIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJlcnIiLCJpbmZvIiwiY29udHlwZSIsImhlYWRlcnMiLCJqc29uIiwiaW5kZXhPZiIsInN0YXR1cyIsImVycm9ycyIsInJlZGlyZWN0IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImV4cG9ydHMiLCJsb2NhbFN0cmF0ZWd5IiwiY29uc29sZSIsImxvZyIsInN0YXJ0c1dpdGgiLCJzcGxpdCIsImN1c3RvbWVyU3RyYXRlZ3kiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvbWlkZGxld2FyZS9zdHJhdGVneS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xyXG5pbXBvcnQgSldUIGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcclxuXHJcbmNvbnN0IEpXVFNpZ24gPSBmdW5jdGlvbihpc3MsIHVzZXIsIGRhdGUpe1xyXG4gICAgcmV0dXJuIEpXVC5zaWduKHtcclxuICAgICAgICBpc3MgOiBpc3MsXHJcbiAgICAgICAgc3ViIDogdXNlci5pZCxcclxuICAgICAgICBpYW0gOiB1c2VyLnR5cGUsXHJcbiAgICAgICAgaWF0IDogZGF0ZS5nZXRUaW1lKCksXHJcbiAgICAgICAgZXhwIDogbmV3IERhdGUoKS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgMzApXHJcbiAgICB9LCBjb25maWcuYXBwLnNlY3JldCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBqd3RTdHJhdGVneSA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgcGFzc3BvcnQuYXV0aGVudGljYXRlKCd1c2VyLWp3dCcsIHtzZXNzaW9uOiBmYWxzZX0sIChlcnIsIHVzZXIsIGluZm8pID0+IHsgXHJcbiAgICAgICAgbGV0IGNvbnR5cGUgPSByZXEuaGVhZGVyc1snY29udGVudC10eXBlJ107XHJcbiAgICAgICAgdmFyIGpzb24gPSAhKCFjb250eXBlIHx8IGNvbnR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpICE9PSAwKTtcclxuICAgICAgICBpZiAoZXJyICYmIGVyciA9PSAnZXhwaXJlZCcpeyByZXR1cm4ganNvbj9yZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydTZXNzaW9uIGlzIGV4cGlyZWQnXX0pOnJlcy5yZWRpcmVjdCgnL2F1dGgvbG9naW4nKTsgfVxyXG4gICAgICAgIGlmIChlcnIgJiYgZXJyID09ICdpbnZhbGlkJyl7IHJldHVybiBqc29uP3Jlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3JzOiBbJ0ludmFsaWQgdG9rZW4gcmVjaWV2ZWQnXX0pOnJlcy5yZWRpcmVjdCgnL2xvZ291dCcpOyB9XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIgPT0gJ3VzZXInKXsgcmV0dXJuIGpzb24/cmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcnM6IFsnSW52YWxpZCB1c2VyIHJlY2lldmVkJ119KTpyZXMucmVkaXJlY3QoJy9sb2dvdXQnKTsgfVxyXG4gICAgICAgIGlmIChlcnIgJiYgT2JqZWN0LmtleXMoZXJyKS5sZW5ndGgpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3JzOiBbIGVyciBdfSk7IH1cclxuICAgICAgICBpZiAoZXJyKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWyAnSW52YWxpZCB1c2VyIHJlY2lldmVkJyBdfSk7IH1cclxuICAgICAgICBpZiAoIXVzZXIpIHsgcmV0dXJuIGpzb24/cmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcnM6IFsnSW52YWxpZCB1c2VyIHJlY2lldmVkJ119KTpyZXMucmVkaXJlY3QoJy9sb2dvdXQnKTsgfVxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KShyZXEsIHJlcywgbmV4dCk7XHJcbn07XHJcblxyXG5leHBvcnQgdmFyIGxvY2FsU3RyYXRlZ3kgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgndXNlci1sb2NhbCcsIHtzZXNzaW9uOiBmYWxzZX0sIChlcnIsIHVzZXIsIGluZm8pID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIgPT0gJ2ludmFsaWQnKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydFbWFpbCBJZCBub3QgdmVyaWZpZWQnXX0pOyB9XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIgPT0gJ2F0dGVtcHQnKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydUb28gbWFueSBpbnZhbGlkIGF0dGVtcHRzLiBQbGVhc2UgcmVzZXQgeW91ciBwYXNzd29yZC4nXX0pOyB9XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIuc3RhcnRzV2l0aCgnYXR0ZW1wdDonKSkgeyByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcnM6IFsnSW52YWxpZCBDcmVkZW50aWFscyAoJyArIGVyci5zcGxpdCgnOicpWzFdKycgQXR0ZW1wdChzKSBMZWZ0KSddfSk7IH1cclxuICAgICAgICBpZiAoZXJyKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWyBlcnIgXX0pOyB9XHJcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydJbnZhbGlkIENyZWRlbnRpYWxzJ119KTsgfVxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KShyZXEsIHJlcywgbmV4dCk7XHJcbn07XHJcblxyXG5leHBvcnQgdmFyIGN1c3RvbWVyU3RyYXRlZ3kgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnY3VzdG9tZXItbG9jYWwnLCB7c2Vzc2lvbjogZmFsc2V9LCAoZXJyLCB1c2VyLCBpbmZvKSA9PiB7XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIgPT0gJ2ludmFsaWQnKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydFbWFpbCBJZCBub3QgdmVyaWZpZWQnXX0pOyB9XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIgPT0gJ2F0dGVtcHQnKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydUb28gbWFueSBpbnZhbGlkIGF0dGVtcHRzLiBQbGVhc2UgcmVzZXQgeW91ciBwYXNzd29yZC4nXX0pOyB9XHJcbiAgICAgICAgaWYgKGVyciAmJiBlcnIuc3RhcnRzV2l0aCgnYXR0ZW1wdDonKSkgeyByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcnM6IFsnSW52YWxpZCBDcmVkZW50aWFscyAoJyArIGVyci5zcGxpdCgnOicpWzFdKycgQXR0ZW1wdChzKSBMZWZ0KSddfSk7IH1cclxuICAgICAgICBpZiAoZXJyKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWyBlcnIgXX0pOyB9XHJcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yczogWydJbnZhbGlkIENyZWRlbnRpYWxzJ119KTsgfVxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KShyZXEsIHJlcywgbmV4dCk7XHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBTUcsT0FBTyxHQUFHLFNBQVZBLE9BQU9BLENBQVlDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUM7RUFDckMsT0FBT0Msd0JBQUcsQ0FBQ0MsSUFBSSxDQUFDO0lBQ1pKLEdBQUcsRUFBR0EsR0FBRztJQUNUSyxHQUFHLEVBQUdKLElBQUksQ0FBQ0ssRUFBRTtJQUNiQyxHQUFHLEVBQUdOLElBQUksQ0FBQ08sSUFBSTtJQUNmQyxHQUFHLEVBQUdQLElBQUksQ0FBQ1EsT0FBTyxDQUFDLENBQUM7SUFDcEJDLEdBQUcsRUFBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxVQUFVLENBQUNYLElBQUksQ0FBQ1ksVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFO0VBQ3RELENBQUMsRUFBRUMsa0JBQU0sQ0FBQ0MsR0FBRyxDQUFDQyxNQUFNLENBQUM7QUFDekIsQ0FBQztBQUVNLElBQU1DLFdBQVcsR0FBRyxTQUFkQSxXQUFXQSxDQUFJQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFLO0VBQzNDQyxvQkFBUSxDQUFDQyxZQUFZLENBQUMsVUFBVSxFQUFFO0lBQUNDLE9BQU8sRUFBRTtFQUFLLENBQUMsRUFBRSxVQUFDQyxHQUFHLEVBQUV4QixJQUFJLEVBQUV5QixJQUFJLEVBQUs7SUFDckUsSUFBSUMsT0FBTyxHQUFHUixHQUFHLENBQUNTLE9BQU8sQ0FBQyxjQUFjLENBQUM7SUFDekMsSUFBSUMsSUFBSSxHQUFHLEVBQUUsQ0FBQ0YsT0FBTyxJQUFJQSxPQUFPLENBQUNHLE9BQU8sQ0FBQyxrQkFBa0Is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